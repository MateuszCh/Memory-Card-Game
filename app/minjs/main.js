function saveRecords(){localStorage.setItem("records_array",JSON.stringify(records))}function Record(e,t){this.result=e,this.nickname=t}function createScoreBoardList(e){scoreLi.innerHTML="";for(var t=0;t<e.length;t++){var n=document.createElement("li"),r=document.createElement("span"),a=document.createElement("span"),c=document.createElement("span");r.textContent=t+1,a.textContent=e[t].nickname,c.textContent=e[t].result,n.appendChild(r),n.appendChild(a),n.appendChild(c),scoreLi.appendChild(n)}}function makeScoreList(e){e.length>1&&e.sort(function(e,t){return e.result-t.result}),e.length>10&&e.pop(),createScoreBoardList(e)}function clickingCard(e){cardFirst||cardSecond?cardFirst&&!cardSecond?(flipped(e.target),cardSecond=e.target):cardFirst&&cardSecond&&(cardFirst.previousSibling.src!=cardSecond.previousSibling.src?(unflipped(cardFirst),unflipped(cardSecond)):(cardFirst.previousSibling.src=cardSecond.previousSibling.src)&&(cardFirst.previousSibling.classList.add("grayish"),cardSecond.previousSibling.classList.add("grayish")),cardSecond="",cardFirst=e.target,flipped(cardFirst)):(cardFirst=e.target,flipped(e.target))}function checkResult(){for(var e=document.getElementsByClassName("card"),t=0;t<e.length;t++)if(!e[t].classList.contains("flipped"))return!1;return!0}function flipped(e){e.parentNode.classList.add("flipped")}function unflipped(e){e.parentNode.classList.remove("flipped")}function shuffle(){for(var e=["czech","france","italy","japan","korea","portugal","russia","uruguay","czech","france","italy","japan","korea","portugal","russia","uruguay"],t=[];e.length;){var n=Math.floor(Math.random()*e.length);t.push(e.splice(n,1)[0])}return t}function dealCards(){var e=document.getElementById("board");e.innerHTML="";for(var t=shuffle();t.length;){var n=document.createElement("img"),r=document.createElement("figure"),a=document.createElement("div");a.classList.add("container");var c=document.createElement("div");c.classList.add("card"),n.src="images/"+t[0]+".png",n.classList.add("front"),r.textContent="Fun with Flags",r.classList.add("back"),c.appendChild(n),c.appendChild(r),a.appendChild(c),e.appendChild(a),t.splice(0,1)}}function counter(){var e=document.getElementById("counter");endGame=(new Date).getTime(),resultTime=endGame-startGame,resultTime/=1e3,resultTime=Math.round(10*resultTime)/10,e.textContent=resultTime}function clearCards(){cardFirst="",cardSecond=""}function rozwinC(e){e.style.display="flex",e.classList.add("rozwinC"),setTimeout(function(){e.classList.remove("rozwinC")},500)}function zwinC(e){e.classList.add("zwinC"),setTimeout(function(){e.style.display="none",e.classList.remove("zwinC")},500)}var cardFirst,cardSecond,startGame,endGame,resultTime,counterInterval,records=[],opening=document.getElementById("opening"),scoreBoard=document.getElementById("scoreBoard"),resultDiv=document.getElementById("result"),resultTimeDiv=document.getElementById("time"),scoreLi=document.getElementById("scoreList"),nameOfPlayer=document.getElementById("nameOfPlayer"),saveScoreButton=document.getElementById("saveScore"),startButton=document.getElementById("startButton"),exitGameButton=document.getElementById("exitGame"),newGameButton=document.getElementById("newGame"),scoreBoardButton=document.getElementById("scoreBoardButton"),closeScoreBoard=document.getElementById("closeScoreBoard");window.addEventListener("load",function(){var e=JSON.parse(localStorage.getItem("records_array"));e&&(records=e,makeScoreList(records))},!1),startButton.addEventListener("click",function(e){clearCards(),dealCards(),zwinC(opening),startGame=(new Date).getTime(),counterInterval=setInterval(counter,100)},!1),scoreBoardButton.addEventListener("click",function(){rozwinC(scoreBoard)},!1),closeScoreBoard.addEventListener("click",function(){zwinC(scoreBoard)},!1),newGameButton.addEventListener("click",function(e){e.preventDefault(),clearCards();for(var t=document.getElementsByClassName("card"),n=0;n<t.length;n++){var r=Math.floor(300*Math.random());t[n].classList.contains("flipped")&&setTimeout(function(e){t[e].classList.remove("flipped")},r,n)}counterInterval&&clearInterval(counterInterval),setTimeout(function(){dealCards(),startGame=(new Date).getTime(),counterInterval=setInterval(counter,100)},802)},!1),exitGameButton.addEventListener("click",function(){clearCards(),counterInterval&&clearInterval(counterInterval),rozwinC(opening)},!1),document.addEventListener("click",function(e){e.target&&e.target.classList.contains("back")&&(clickingCard(e),checkResult()&&(clearInterval(counterInterval),endGame=(new Date).getTime(),resultTime=endGame-startGame,resultTime/=1e3,resultTimeDiv.textContent="Your time is: "+resultTime+" seconds.",setTimeout(function(){rozwinC(resultDiv)},1e3)))},!1),saveScoreButton.addEventListener("click",function(e){e.preventDefault(),records.push(new Record(resultTime,nameOfPlayer.value)),opening.style.display="flex",zwinC(resultDiv),nameOfPlayer.value="",makeScoreList(records),saveRecords()},!1);